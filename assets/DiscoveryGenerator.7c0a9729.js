import{i as T,b6 as U,r as C,a as q,W as d,Y as y,Z as n,_ as e,aq as V,$ as v,V as u,aV as g,b7 as w,a0 as O,as as _,ap as A,aX as $,ab as f,b8 as K,j as M,aT as P,ar as E,X as D,b3 as Q,b2 as j,aW as I}from"./index.b5beb44c.js";import{Q as S,M as N}from"./MonacoEditor.c4a998fc.js";import{a as h}from"./QResizeObserver.9a37a7d2.js";import{Q as R}from"./QPage.2d92a1e4.js";import{a as x}from"./homeassistant.afc81340.js";import{Q as H}from"./QBanner.9f9327ea.js";function F(){return T(U)}const W=f("div",{class:"text-caption text-weight-light"}," /homeassistant/[type]/[DeviceId]/[ObjectId] ",-1),X={__name:"HomeAssistantMqttEntity",props:{entity:{type:Object,required:!0},device:{type:Object,required:!0}},setup(p){const t=p,r=x(),o=C(null),l=q({get(){return JSON.stringify(t.entity.config,null,2)},set(m){try{const i=JSON.parse(m);t.entity.config=i,o.value=null}catch(i){o.value=i.message}}});return(m,i)=>(d(),y($,{flat:"",bordered:""},{default:n(()=>[e(g,null,{default:n(()=>[e(h,null,{default:n(()=>[e(V,{modelValue:t.entity.type,"onUpdate:modelValue":i[0]||(i[0]=a=>t.entity.type=a),label:"Entity Type",dense:""},null,8,["modelValue"]),e(V,{modelValue:t.entity.id,"onUpdate:modelValue":i[1]||(i[1]=a=>t.entity.id=a),label:"Entity Object Id",dense:""},null,8,["modelValue"]),e(S),e(v,{label:"remove",color:"negative",flat:"",onClick:i[2]||(i[2]=a=>u(r).removeDeviceEntity(t.device,t.entity))})]),_:1}),W]),_:1}),e(g,null,{default:n(()=>[e(N,{modelValue:u(l),"onUpdate:modelValue":i[3]||(i[3]=a=>w(l)?l.value=a:null),filetype:t.entity.type,style:{"min-height":"200px"}},null,8,["modelValue","filetype"]),o.value?(d(),y(H,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:n(()=>[O(" Invalid Format: "+_(o.value),1)]),_:1})):A("",!0)]),_:1})]),_:1}))}};function k(){const{emit:p,proxy:t}=M(),r=C(null);function o(){r.value.show()}function l(){r.value.hide()}function m(a){p("ok",a),l()}function i(){p("hide")}return Object.assign(t,{show:o,hide:l}),{dialogRef:r,onDialogHide:i,onDialogOK:m,onDialogCancel:l}}const B=["ok","hide"];k.emits=B;k.emitsObject=K(B);const G=f("div",{class:"text-h6"},"Entries",-1),L={style:{"max-height":"50vh"},class:"scroll q-ma-md"},Y={class:"text-subtitle1"},Z=O(" Published to "),z={__name:"DialogDeviceDiscovery",props:{device:{type:Object,required:!0}},emits:[...k.emits],setup(p){const t=p,r=x(),{dialogRef:o,onDialogHide:l,onDialogOK:m,onDialogCancel:i}=k();function a(){m()}return(s,c)=>(d(),y(P,{ref_key:"dialogRef",ref:o,onHide:u(l)},{default:n(()=>[e($,{style:{"max-width":"80vw"}},{default:n(()=>[e(g,null,{default:n(()=>[G]),_:1}),e(E),f("div",L,[(d(!0),D(j,null,Q(u(r).toDiscoveryEntries(t.device),(b,J)=>(d(),D("div",{key:J},[f("div",Y,[Z,f("em",null,_(b.topic),1)]),f("pre",null,_(b.message),1),e(E)]))),128))]),e(I,{align:"right"},{default:n(()=>[e(v,{color:"secondary",flat:"",label:"publish",onClick:c[0]||(c[0]=b=>{u(r).publishDevice(t.device),a()})}),e(v,{color:"primary",flat:"",label:"close",onClick:a})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ee=f("div",{class:"text-caption text-weight-light"}," /homeassistant/[type]/[DeviceId]/[ObjectId] ",-1),te=f("div",{class:"text-h6"},"Entities",-1),le={__name:"HomeAssistantMqttDevice",props:{device:{type:Object,required:!0}},setup(p){const t=p,r=x(),o=F(),l=C(null),m=q({get(){return JSON.stringify(t.device.config,null,2)},set(a){try{const s=JSON.parse(a);t.device.config=s,l.value=null}catch(s){l.value=s.message}}});function i(){o.dialog({component:z,componentProps:{device:t.device}})}return(a,s)=>(d(),y($,null,{default:n(()=>[e(g,null,{default:n(()=>[e(h,null,{default:n(()=>[e(V,{modelValue:t.device.id,"onUpdate:modelValue":s[0]||(s[0]=c=>t.device.id=c),label:"Device Id Topic"},null,8,["modelValue"]),e(v,{label:"view messages",flat:"",color:"primary",onClick:i}),e(v,{flat:"",label:"publish",color:"secondary",onClick:s[1]||(s[1]=c=>u(r).publishDevice(t.device))}),e(S),e(v,{label:"remove",color:"negative",flat:"",onClick:s[2]||(s[2]=c=>u(r).removeDevice(t.device))})]),_:1}),ee]),_:1}),e(g,null,{default:n(()=>[e(N,{modelValue:u(m),"onUpdate:modelValue":s[3]||(s[3]=c=>w(m)?m.value=c:null),filetype:"device",style:{"min-height":"200px"}},null,8,["modelValue"]),l.value?(d(),y(H,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:n(()=>[O(" Invalid Format: "+_(l.value),1)]),_:1})):A("",!0)]),_:1}),e(g,null,{default:n(()=>[te]),_:1}),(d(!0),D(j,null,Q(t.device.entities,(c,b)=>(d(),y(g,{key:b},{default:n(()=>[e(X,{entity:c,device:t.device},null,8,["entity","device"])]),_:2},1024))),128)),e(I,null,{default:n(()=>[e(v,{label:"Add Sensor",color:"primary",flat:"",onClick:s[4]||(s[4]=c=>u(r).addEntityToDevice(null,t.device))})]),_:1})]),_:1}))}},ue={__name:"DiscoveryGenerator",setup(p){const t=x();return(r,o)=>(d(),y(R,null,{default:n(()=>[e(h,{class:"bg-grey-3"},{default:n(()=>[e(v,{label:"publish all",flat:"",color:"secondary",onClick:o[0]||(o[0]=l=>u(t).publishAllDevices())}),e(S),e(v,{label:"remove all",flat:"",color:"negative",onClick:o[1]||(o[1]=l=>u(t).removeAll())})]),_:1}),(d(!0),D(j,null,Q(u(t).devices,l=>(d(),y(le,{device:l,key:l.id,class:"q-ma-md"},null,8,["device"]))),128)),e(h,null,{default:n(()=>[e(v,{label:"add device",color:"primary",onClick:o[2]||(o[2]=l=>u(t).addDevice())})]),_:1})]),_:1}))}};export{ue as default};
