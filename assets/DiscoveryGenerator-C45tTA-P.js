import{i as B,b4 as J,r as O,a as q,$ as y,_ as d,a1 as i,a0 as e,a$ as g,a6 as f,ap as V,a3 as v,Z as m,ar as w,a2 as E,as as b,b1 as Q,g as F,aq as h,Y as D,aE as j,aF as S,b0 as A,a_ as T}from"./index-BgBVt1_Q.js";import{Q as $,M as I}from"./MonacoEditor-DphXJ5Yg.js";import{a as _}from"./QResizeObserver-C1A10BAI.js";import{Q as U}from"./QPage-DvneEUB1.js";import{a as x}from"./homeassistant-PiMeOH9o.js";import{Q as N}from"./QBanner-CM5DsgUo.js";function K(){return B(J)}const M={__name:"HomeAssistantMqttEntity",props:{entity:{type:Object,required:!0},device:{type:Object,required:!0}},setup(c){const s=x(),n=c,t=O(null),a=q({get(){return JSON.stringify(n.entity.config,null,2)},set(p){try{const o=JSON.parse(p);n.entity.config=o,t.value=null}catch(o){t.value=o.message}}});return(p,o)=>(d(),y(Q,{flat:"",bordered:""},{default:i(()=>[e(g,null,{default:i(()=>[e(_,null,{default:i(()=>[e(V,{modelValue:n.entity.type,"onUpdate:modelValue":o[0]||(o[0]=r=>n.entity.type=r),label:"Entity Type",dense:""},null,8,["modelValue"]),e(V,{modelValue:n.entity.id,"onUpdate:modelValue":o[1]||(o[1]=r=>n.entity.id=r),label:"Entity Object Id",dense:""},null,8,["modelValue"]),e($),e(v,{label:"remove",color:"negative",flat:"",onClick:o[2]||(o[2]=r=>m(s).removeDeviceEntity(n.device,n.entity))})]),_:1}),o[4]||(o[4]=f("div",{class:"text-caption text-weight-light"},"/homeassistant/[type]/[DeviceId]/[ObjectId]",-1))]),_:1,__:[4]}),e(g,null,{default:i(()=>[e(I,{modelValue:a.value,"onUpdate:modelValue":o[3]||(o[3]=r=>a.value=r),filetype:n.entity.type,style:{"min-height":"200px"}},null,8,["modelValue","filetype"]),t.value?(d(),y(N,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:i(()=>[E(" Invalid Format: "+b(t.value),1)]),_:1})):w("",!0)]),_:1})]),_:1}))}},P=()=>!0;function R(c){const s={};return c.forEach(n=>{s[n]=P}),s}function k(){const{emit:c,proxy:s}=F(),n=O(null);function t(){n.value.show()}function a(){n.value.hide()}function p(r){c("ok",r),a()}function o(){c("hide")}return Object.assign(s,{show:t,hide:a}),{dialogRef:n,onDialogHide:o,onDialogOK:p,onDialogCancel:a}}const H=["ok","hide"];k.emits=H;k.emitsObject=R(H);const G={style:{"max-height":"50vh"},class:"scroll q-ma-md"},L={class:"text-subtitle1"},Y={__name:"DialogDeviceDiscovery",props:{device:{type:Object,required:!0}},emits:[...k.emits],setup(c){const s=x(),n=c,{dialogRef:t,onDialogHide:a,onDialogOK:p}=k();function o(){p()}return(r,l)=>(d(),y(T,{ref_key:"dialogRef",ref:t,onHide:m(a)},{default:i(()=>[e(Q,{style:{"max-width":"80vw"}},{default:i(()=>[e(g,null,{default:i(()=>l[1]||(l[1]=[f("div",{class:"text-h6"},"Entries",-1)])),_:1,__:[1]}),e(h),f("div",G,[(d(!0),D(j,null,S(m(s).toDiscoveryEntries(n.device),(u,C)=>(d(),D("div",{key:C},[f("div",L,[l[2]||(l[2]=E(" Published to ")),f("em",null,b(u.topic),1)]),f("pre",null,b(u.message),1),e(h)]))),128))]),e(A,{align:"right"},{default:i(()=>[e(v,{color:"secondary",flat:"",label:"publish",onClick:l[0]||(l[0]=u=>{m(s).publishDevice(n.device),o()})}),e(v,{color:"primary",flat:"",label:"close",onClick:o})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Z={__name:"HomeAssistantMqttDevice",props:{device:{type:Object,required:!0}},setup(c){const s=x(),n=K(),t=c,a=O(null),p=q({get(){return JSON.stringify(t.device.config,null,2)},set(r){try{const l=JSON.parse(r);t.device.config=l,a.value=null}catch(l){a.value=l.message}}});function o(){n.dialog({component:Y,componentProps:{device:t.device}})}return(r,l)=>(d(),y(Q,null,{default:i(()=>[e(g,null,{default:i(()=>[e(_,null,{default:i(()=>[e(V,{modelValue:t.device.id,"onUpdate:modelValue":l[0]||(l[0]=u=>t.device.id=u),label:"Device Id Topic"},null,8,["modelValue"]),e(v,{label:"view messages",flat:"",color:"primary",onClick:o}),e(v,{flat:"",label:"publish",color:"secondary",onClick:l[1]||(l[1]=u=>m(s).publishDevice(t.device))}),e($),e(v,{label:"remove",color:"negative",flat:"",onClick:l[2]||(l[2]=u=>m(s).removeDevice(t.device))})]),_:1}),l[5]||(l[5]=f("div",{class:"text-caption text-weight-light"},"/homeassistant/[type]/[DeviceId]/[ObjectId]",-1))]),_:1,__:[5]}),e(g,null,{default:i(()=>[e(I,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=u=>p.value=u),filetype:"device",style:{"min-height":"200px"}},null,8,["modelValue"]),a.value?(d(),y(N,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:i(()=>[E(" Invalid Format: "+b(a.value),1)]),_:1})):w("",!0)]),_:1}),e(g,null,{default:i(()=>l[6]||(l[6]=[f("div",{class:"text-h6"},"Entities",-1)])),_:1,__:[6]}),(d(!0),D(j,null,S(t.device.entities,(u,C)=>(d(),y(g,{key:C},{default:i(()=>[e(M,{entity:u,device:t.device},null,8,["entity","device"])]),_:2},1024))),128)),e(A,null,{default:i(()=>[e(v,{label:"Add Sensor",color:"primary",flat:"",onClick:l[4]||(l[4]=u=>m(s).addEntityToDevice(null,t.device))})]),_:1})]),_:1}))}},ne={__name:"DiscoveryGenerator",setup(c){const s=x();return(n,t)=>(d(),y(U,null,{default:i(()=>[e(_,{class:"bg-grey-3"},{default:i(()=>[e(v,{label:"publish all",flat:"",color:"secondary",onClick:t[0]||(t[0]=a=>m(s).publishAllDevices())}),e($),e(v,{label:"remove all",flat:"",color:"negative",onClick:t[1]||(t[1]=a=>m(s).removeAll())})]),_:1}),(d(!0),D(j,null,S(m(s).devices,a=>(d(),y(Z,{key:a.id,device:a,class:"q-ma-md"},null,8,["device"]))),128)),e(_,null,{default:i(()=>[e(v,{label:"add device",color:"primary",onClick:t[2]||(t[2]=a=>m(s).addDevice())})]),_:1})]),_:1}))}};export{ne as default};
