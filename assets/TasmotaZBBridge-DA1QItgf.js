import{c as A,g as I,h as u,b as K,B as $t,Q as De,a as f,r as N,ae as Y,aa as Ee,l as Dt,a3 as L,a7 as be,a8 as me,E as Et,p as j,F as Mt,D as We,av as lt,d as at,y as Lt,x as Qt,o as nt,f as ot,aw as Nt,ax as jt,ay as At,az as Ke,aA as Ve,aB as Ge,aC as Ht,aD as Zt,ac as Te,aq as Ut,$ as Z,_ as p,a1 as E,Y as U,Z as k,a6 as $,ar as ee,aE as de,aF as ve,a0 as T,aG as zt,at as Je,a2 as z,aH as fe,w as It,as as pe,ap as Wt,ad as Kt}from"./index-V6CcqAmY.js";import{Q as Xe}from"./QBanner-CidM3vsI.js";import{a as Gt,u as Jt,b as Xt,c as rt,Q as Yt,_ as el}from"./MqttConfig-CWUWPoN0.js";import{Q as tl}from"./QPage-B-kH2ZDp.js";import{u as ll}from"./homeassistant-Dy3qvHUR.js";import{g as al}from"./position-engine-J2v4YHeK.js";const $e=A({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:l}){const c=I(),{proxy:{$q:i}}=c,n=a=>{l("click",a)};return()=>{if(e.props===void 0)return u("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:n},K(o.default));let a,r;const v=c.vnode.key;if(v){if(a=e.props.colsMap[v],a===void 0)return}else a=e.props.col;if(a.sortable===!0){const s=a.align==="right"?"unshift":"push";r=$t(o.default,[]),r[s](u(De,{class:a.__iconClass,name:i.iconSet.table.arrowUp}))}else r=K(o.default);const S={class:a.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:s=>{a.sortable===!0&&e.props.sort(a),n(s)}};return u("th",S,r)}}}),Fe=A({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const l=f(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>u("tr",{style:e.props?.__trStyle,class:l.value},K(o.default))}}),Oe=A({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const l=I(),c=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return u("td",{class:c.value},K(o.default));const i=l.vnode.key,n=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(n===void 0)return;const{row:a}=e.props;return u("td",{class:c.value+n.__tdClass(a),style:n.__tdStyle(a)},K(o.default))}}});function le(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const l=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const c=e.valueOf();if(Object(c)!==c){const i=new e.constructor(c);return o.set(e,i),i}}return o.set(e,l),e instanceof Set?e.forEach(c=>{l.add(le(c,o))}):e instanceof Map&&e.forEach((c,i)=>{l.set(i,le(c,o))}),Object.assign(l,...Object.keys(e).map(c=>({[c]:le(e[c],o)})))}const nl=A({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:o,emit:l}){const{proxy:c}=I(),{$q:i}=c,n=N(null),a=N(""),r=N("");let v=!1;const S=f(()=>Y({initialValue:a.value,validate:e.validate,set:s,cancel:g,updatePosition:q},"value",()=>r.value,_=>{r.value=_}));function s(){e.validate(r.value)!==!1&&(C()===!0&&(l("save",r.value,a.value),l("update:modelValue",r.value)),P())}function g(){C()===!0&&l("cancel",r.value,a.value),P()}function q(){Ee(()=>{n.value.updatePosition()})}function C(){return Dt(r.value,a.value)===!1}function P(){v=!0,n.value.hide()}function h(){v=!1,a.value=le(e.modelValue),r.value=le(e.modelValue),l("beforeShow")}function w(){l("show")}function F(){v===!1&&C()===!0&&(e.autoSave===!0&&e.validate(r.value)===!0?(l("save",r.value,a.value),l("update:modelValue",r.value)):l("cancel",r.value,a.value)),l("beforeHide")}function O(){l("hide")}function D(){const _=o.default!==void 0?[].concat(o.default(S.value)):[];return e.title&&_.unshift(u("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&_.push(u("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[u(L,{flat:!0,color:e.color,label:e.labelCancel||i.lang.label.cancel,onClick:g}),u(L,{flat:!0,color:e.color,label:e.labelSet||i.lang.label.set,onClick:s})])),_}return Object.assign(c,{set:s,cancel:g,show(_){n.value?.show(_)},hide(_){n.value?.hide(_)},updatePosition:q}),()=>{if(e.disable!==!0)return u(Gt,{ref:n,class:"q-popup-edit",cover:e.cover,onBeforeShow:h,onShow:w,onBeforeHide:F,onHide:O,onEscapeKey:g},D)}}}),ol=["ul","ol"],rl=A({name:"QList",props:{...be,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:o}){const l=I(),c=me(e,l.proxy.$q),i=f(()=>ol.includes(e.tag)?null:"list"),n=f(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(c.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>u(e.tag,{class:n.value,role:i.value},K(o.default))}}),il=["horizontal","vertical","cell","none"],sl=A({name:"QMarkupTable",props:{...be,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>il.includes(e)}},setup(e,{slots:o}){const l=I(),c=me(e,l.proxy.$q),i=f(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(c.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>u("div",{class:i.value},[u("table",{class:"q-table"},K(o.default))])}});function it(e,o){return u("div",e,[u("table",{class:"q-table"},o)])}const ul={list:rl,table:sl},cl=["list","table","__qtable"],dl=A({name:"QVirtualScroll",props:{...Jt,type:{type:String,default:"list",validator:e=>cl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Et},setup(e,{slots:o,attrs:l}){let c;const i=N(null),n=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:r,padVirtualScroll:v,onVirtualScrollEvt:S}=Xt({virtualScrollLength:n,getVirtualScrollTarget:P,getVirtualScrollEl:C}),s=f(()=>{if(n.value===0)return[];const O=(D,_)=>({index:a.value.from+_,item:D});return e.itemsFn===void 0?e.items.slice(a.value.from,a.value.to).map(O):e.itemsFn(a.value.from,a.value.to-a.value.from).map(O)}),g=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});j(n,()=>{r()}),j(()=>e.scrollTarget,()=>{w(),h()});function C(){return i.value.$el||i.value}function P(){return c}function h(){c=Mt(C(),e.scrollTarget),c.addEventListener("scroll",S,We.passive)}function w(){c!==void 0&&(c.removeEventListener("scroll",S,We.passive),c=void 0)}function F(){let O=v(e.type==="list"?"div":"tbody",s.value.map(o.default));return o.before!==void 0&&(O=o.before().concat(O)),ot(o.after,O)}return lt(()=>{r()}),at(()=>{h()}),Lt(()=>{h()}),Qt(()=>{w()}),nt(()=>{w()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?it({ref:i,class:"q-table__middle "+g.value},F()):u(ul[e.type],{...l,ref:i,class:[l.class,g.value],...q.value},F)}}}),vl={xs:2,sm:4,md:6,lg:10,xl:14};function Ye(e,o,l){return{transform:o===!0?`translateX(${l.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const fl=A({name:"QLinearProgress",props:{...be,...Nt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:o}){const{proxy:l}=I(),c=me(e,l.$q),i=jt(e,vl),n=f(()=>e.indeterminate===!0||e.query===!0),a=f(()=>e.reverse!==e.query),r=f(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),v=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),S=f(()=>Ye(e.buffer!==void 0?e.buffer:1,a.value,l.$q)),s=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),g=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${s.value} q-linear-progress__track--${c.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),q=f(()=>Ye(n.value===!0?1:e.value,a.value,l.$q)),C=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${s.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),P=f(()=>({width:`${e.value*100}%`})),h=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${s.value}`);return()=>{const w=[u("div",{class:g.value,style:S.value}),u("div",{class:C.value,style:q.value})];return e.stripe===!0&&n.value===!1&&w.push(u("div",{class:h.value,style:P.value})),u("div",{class:v.value,style:r.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ot(o.default,w))}}});let te=0;const gl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},bl=["update:fullscreen","fullscreen"];function ml(){const e=I(),{props:o,emit:l,proxy:c}=e;let i,n,a;const r=N(!1);At(e)===!0&&j(()=>c.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&s()}),j(()=>o.fullscreen,g=>{r.value!==g&&v()}),j(r,g=>{l("update:fullscreen",g),l("fullscreen",g)});function v(){r.value===!0?s():S()}function S(){r.value!==!0&&(r.value=!0,a=c.$el.parentNode,a.replaceChild(n,c.$el),document.body.appendChild(c.$el),te++,te===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:s},Ke.add(i))}function s(){r.value===!0&&(i!==void 0&&(Ke.remove(i),i=void 0),a.replaceChild(c.$el,n),r.value=!1,te=Math.max(0,te-1),te===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),c.$el.scrollIntoView!==void 0&&setTimeout(()=>{c.$el.scrollIntoView()})))}return lt(()=>{n=document.createElement("span")}),at(()=>{o.fullscreen===!0&&S()}),nt(s),Object.assign(c,{toggleFullscreen:v,setFullscreen:S,exitFullscreen:s}),{inFullscreen:r,toggleFullscreen:v}}function Sl(e,o){return new Date(e)-new Date(o)}const yl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function wl(e,o,l,c){const i=f(()=>{const{sortBy:r}=o.value;return r&&l.value.find(v=>v.name===r)||null}),n=f(()=>e.sortMethod!==void 0?e.sortMethod:(r,v,S)=>{const s=l.value.find(C=>C.name===v);if(s===void 0||s.field===void 0)return r;const g=S===!0?-1:1,q=typeof s.field=="function"?C=>s.field(C):C=>C[s.field];return r.sort((C,P)=>{let h=q(C),w=q(P);return s.rawSort!==void 0?s.rawSort(h,w,C,P)*g:h==null?-1*g:w==null?1*g:s.sort!==void 0?s.sort(h,w,C,P)*g:Ve(h)===!0&&Ve(w)===!0?(h-w)*g:Ge(h)===!0&&Ge(w)===!0?Sl(h,w)*g:typeof h=="boolean"&&typeof w=="boolean"?(h-w)*g:([h,w]=[h,w].map(F=>(F+"").toLocaleString().toLowerCase()),h<w?-1*g:h===w?0:g)})});function a(r){let v=e.columnSortOrder;if(Ht(r)===!0)r.sortOrder&&(v=r.sortOrder),r=r.name;else{const g=l.value.find(q=>q.name===r);g?.sortOrder&&(v=g.sortOrder)}let{sortBy:S,descending:s}=o.value;S!==r?(S=r,s=v==="da"):e.binaryStateSort===!0?s=!s:s===!0?v==="ad"?S=null:s=!1:v==="ad"?s=!0:S=null,c({sortBy:S,descending:s,page:1})}return{columnToSort:i,computedSortMethod:n,sort:a}}const hl={filter:[String,Object],filterMethod:Function};function Cl(e,o){const l=f(()=>e.filterMethod!==void 0?e.filterMethod:(c,i,n,a)=>{const r=i?i.toLowerCase():"";return c.filter(v=>n.some(S=>{const s=a(S,v)+"";return(s==="undefined"||s==="null"?"":s.toLowerCase()).indexOf(r)!==-1}))});return j(()=>e.filter,()=>{Ee(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:l}}function ql(e,o){for(const l in o)if(o[l]!==e[l])return!1;return!0}function et(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const _l={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Pl(e,o){const{props:l,emit:c}=e,i=N(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:l.rowsPerPageOptions.length!==0?l.rowsPerPageOptions[0]:5},l.pagination)),n=f(()=>{const s=l["onUpdate:pagination"]!==void 0?{...i.value,...l.pagination}:i.value;return et(s)}),a=f(()=>n.value.rowsNumber!==void 0);function r(s){v({pagination:s,filter:l.filter})}function v(s={}){Ee(()=>{c("request",{pagination:s.pagination||n.value,filter:s.filter||l.filter,getCellValue:o})})}function S(s,g){const q=et({...n.value,...s});if(ql(n.value,q)===!0){a.value===!0&&g===!0&&r(q);return}if(a.value===!0){r(q);return}l.pagination!==void 0&&l["onUpdate:pagination"]!==void 0?c("update:pagination",q):i.value=q}return{innerPagination:i,computedPagination:n,isServerSide:a,requestServerInteraction:v,setPagination:S}}function kl(e,o,l,c,i,n){const{props:a,emit:r,proxy:{$q:v}}=e,S=f(()=>c.value===!0?l.value.rowsNumber||0:n.value),s=f(()=>{const{page:_,rowsPerPage:V}=l.value;return(_-1)*V}),g=f(()=>{const{page:_,rowsPerPage:V}=l.value;return _*V}),q=f(()=>l.value.page===1),C=f(()=>l.value.rowsPerPage===0?1:Math.max(1,Math.ceil(S.value/l.value.rowsPerPage))),P=f(()=>g.value===0?!0:l.value.page>=C.value),h=f(()=>(a.rowsPerPageOptions.includes(o.value.rowsPerPage)?a.rowsPerPageOptions:[o.value.rowsPerPage].concat(a.rowsPerPageOptions)).map(V=>({label:V===0?v.lang.table.allRows:""+V,value:V})));j(C,(_,V)=>{if(_===V)return;const ae=l.value.page;_&&!ae?i({page:1}):_<ae&&i({page:_})});function w(){i({page:1})}function F(){const{page:_}=l.value;_>1&&i({page:_-1})}function O(){const{page:_,rowsPerPage:V}=l.value;g.value>0&&_*V<S.value&&i({page:_+1})}function D(){i({page:C.value})}return a["onUpdate:pagination"]!==void 0&&r("update:pagination",{...l.value}),{firstRowIndex:s,lastRowIndex:g,isFirstPage:q,isLastPage:P,pagesNumber:C,computedRowsPerPageOptions:h,computedRowsNumber:S,firstPage:w,prevPage:F,nextPage:O,lastPage:D}}const Bl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},xl=["update:selected","selection"];function Rl(e,o,l,c){const i=f(()=>{const P={};return e.selected.map(c.value).forEach(h=>{P[h]=!0}),P}),n=f(()=>e.selection!=="none"),a=f(()=>e.selection==="single"),r=f(()=>e.selection==="multiple"),v=f(()=>l.value.length!==0&&l.value.every(P=>i.value[c.value(P)]===!0)),S=f(()=>v.value!==!0&&l.value.some(P=>i.value[c.value(P)]===!0)),s=f(()=>e.selected.length);function g(P){return i.value[P]===!0}function q(){o("update:selected",[])}function C(P,h,w,F){o("selection",{rows:h,added:w,keys:P,evt:F});const O=a.value===!0?w===!0?h:[]:w===!0?e.selected.concat(h):e.selected.filter(D=>P.includes(c.value(D))===!1);o("update:selected",O)}return{hasSelectionMode:n,singleSelection:a,multipleSelection:r,allRowsSelected:v,someRowsSelected:S,rowsSelectedNumber:s,isRowSelected:g,clearSelection:q,updateSelection:C}}function tt(e){return Array.isArray(e)?e.slice():[]}const Tl={expanded:Array},pl=["update:expanded"];function Fl(e,o){const l=N(tt(e.expanded));j(()=>e.expanded,a=>{l.value=tt(a)});function c(a){return l.value.includes(a)}function i(a){e.expanded!==void 0?o("update:expanded",a):l.value=a}function n(a,r){const v=l.value.slice(),S=v.indexOf(a);r===!0?S===-1&&(v.push(a),i(v)):S!==-1&&(v.splice(S,1),i(v))}return{isRowExpanded:c,setExpanded:i,updateExpanded:n}}const Ol={visibleColumns:Array};function Vl(e,o,l){const c=f(()=>{if(e.columns!==void 0)return e.columns;const r=e.rows[0];return r!==void 0?Object.keys(r).map(v=>({name:v,label:v.toUpperCase(),field:v,align:Ve(r[v])?"right":"left",sortable:!0})):[]}),i=f(()=>{const{sortBy:r,descending:v}=o.value;return(e.visibleColumns!==void 0?c.value.filter(s=>s.required===!0||e.visibleColumns.includes(s.name)===!0):c.value).map(s=>{const g=s.align||"right",q=`text-${g}`;return{...s,align:g,__iconClass:`q-table__sort-icon q-table__sort-icon--${g}`,__thClass:q+(s.headerClasses!==void 0?" "+s.headerClasses:"")+(s.sortable===!0?" sortable":"")+(s.name===r?` sorted ${v===!0?"sort-desc":""}`:""),__tdStyle:s.style!==void 0?typeof s.style!="function"?()=>s.style:s.style:()=>null,__tdClass:s.classes!==void 0?typeof s.classes!="function"?()=>q+" "+s.classes:C=>q+" "+s.classes(C):()=>q}})}),n=f(()=>{const r={};return i.value.forEach(v=>{r[v.name]=v}),r}),a=f(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(l.value===!0?1:0));return{colList:c,computedCols:i,computedColsMap:n,computedColspan:a}}const ge="q-table__bottom row items-center",st={};rt.forEach(e=>{st[e]={}});const $l=A({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...st,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...be,...gl,...Ol,...hl,..._l,...Tl,...Bl,...yl},emits:["request","virtualScroll",...bl,...pl,...xl],setup(e,{slots:o,emit:l}){const c=I(),{proxy:{$q:i}}=c,n=me(e,i),{inFullscreen:a,toggleFullscreen:r}=ml(),v=f(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),S=N(null),s=N(null),g=f(()=>e.grid!==!0&&e.virtualScroll===!0),q=f(()=>" q-table__card"+(n.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),C=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(n.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),P=f(()=>C.value+(e.loading===!0?" q-table--loading":""));j(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+C.value,()=>{g.value===!0&&s.value?.reset()});const{innerPagination:h,computedPagination:w,isServerSide:F,requestServerInteraction:O,setPagination:D}=Pl(c,J),{computedFilterMethod:_}=Cl(e,D),{isRowExpanded:V,setExpanded:ae,updateExpanded:ut}=Fl(e,l),Se=f(()=>{let t=e.rows;if(F.value===!0||t.length===0)return t;const{sortBy:d,descending:b}=w.value;return e.filter&&(t=_.value(t,e.filter,Q.value,J)),gt.value!==null&&(t=bt.value(e.rows===t?t.slice():t,d,b)),t}),Me=f(()=>Se.value.length),H=f(()=>{let t=Se.value;if(F.value===!0)return t;const{rowsPerPage:d}=w.value;return d!==0&&(oe.value===0&&e.rows!==t?t.length>re.value&&(t=t.slice(0,re.value)):t=t.slice(oe.value,re.value)),t}),{hasSelectionMode:G,singleSelection:ct,multipleSelection:Le,allRowsSelected:dt,someRowsSelected:Qe,rowsSelectedNumber:ye,isRowSelected:we,clearSelection:vt,updateSelection:ne}=Rl(e,l,H,v),{colList:ft,computedCols:Q,computedColsMap:Ne,computedColspan:je}=Vl(e,w,G),{columnToSort:gt,computedSortMethod:bt,sort:he}=wl(e,w,ft,D),{firstRowIndex:oe,lastRowIndex:re,isFirstPage:Ce,isLastPage:qe,pagesNumber:ie,computedRowsPerPageOptions:mt,computedRowsNumber:se,firstPage:_e,prevPage:Pe,nextPage:ke,lastPage:Be}=kl(c,h,w,F,D,Me),St=f(()=>H.value.length===0),yt=f(()=>{const t={};return rt.forEach(d=>{t[d]=e[d]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function wt(){g.value===!0&&s.value.reset()}function ht(){if(e.grid===!0)return Ot();const t=e.hideHeader!==!0?ze:null;if(g.value===!0){const b=o["top-row"],m=o["bottom-row"],y={default:R=>He(R.item,o.body,R.index)};if(b!==void 0){const R=u("tbody",b({cols:Q.value}));y.before=t===null?()=>R:()=>[t()].concat(R)}else t!==null&&(y.before=t);return m!==void 0&&(y.after=()=>u("tbody",m({cols:Q.value}))),u(dl,{ref:s,class:e.tableClass,style:e.tableStyle,...yt.value,scrollTarget:e.virtualScrollTarget,items:H.value,type:"__qtable",tableColspan:je.value,onVirtualScroll:qt},y)}const d=[_t()];return t!==null&&d.unshift(t()),it({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},d)}function Ct(t,d){if(s.value!==null){s.value.scrollTo(t,d);return}t=parseInt(t,10);const b=S.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(b!==null){const m=S.value.querySelector(".q-table__middle.scroll"),y=b.offsetTop-e.virtualScrollStickySizeStart,R=y<m.scrollTop?"decrease":"increase";m.scrollTop=y,l("virtualScroll",{index:t,from:0,to:h.value.rowsPerPage-1,direction:R})}}function qt(t){l("virtualScroll",t)}function Ae(){return[u(fl,{class:"q-table__linear-progress",color:e.color,dark:n.value,indeterminate:!0,trackColor:"transparent"})]}function He(t,d,b){const m=v.value(t),y=we(m);if(d!==void 0){const x={key:m,row:t,pageIndex:b,__trClass:y?"selected":""};if(e.tableRowStyleFn!==void 0&&(x.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const W=e.tableRowClassFn(t);W&&(x.__trClass=`${W} ${x.__trClass}`)}return d(Ze(x))}const R=o["body-cell"],B=Q.value.map(x=>{const W=o[`body-cell-${x.name}`],ce=W!==void 0?W:R;return ce!==void 0?ce(Pt({key:m,row:t,pageIndex:b,col:x})):u("td",{class:x.__tdClass(t),style:x.__tdStyle(t)},J(x,t))});if(G.value===!0){const x=o["body-selection"],W=x!==void 0?x(kt({key:m,row:t,pageIndex:b})):[u(Te,{modelValue:y,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(ce,Vt)=>{ne([m],[t],ce,Vt)}})];B.unshift(u("td",{class:"q-table--col-auto-width"},W))}const M={key:m,class:{selected:y}};if(e.onRowClick!==void 0&&(M.class["cursor-pointer"]=!0,M.onClick=x=>{l("rowClick",x,t,b)}),e.onRowDblclick!==void 0&&(M.class["cursor-pointer"]=!0,M.onDblclick=x=>{l("rowDblclick",x,t,b)}),e.onRowContextmenu!==void 0&&(M.class["cursor-pointer"]=!0,M.onContextmenu=x=>{l("rowContextmenu",x,t,b)}),e.tableRowStyleFn!==void 0&&(M.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const x=e.tableRowClassFn(t);x&&(M.class[x]=!0)}return u("tr",M,B)}function _t(){const t=o.body,d=o["top-row"],b=o["bottom-row"];let m=H.value.map((y,R)=>He(y,t,R));return d!==void 0&&(m=d({cols:Q.value}).concat(m)),b!==void 0&&(m=m.concat(b({cols:Q.value}))),u("tbody",m)}function Ze(t){return xe(t),t.cols=t.cols.map(d=>Y({...d},"value",()=>J(d,t.row))),t}function Pt(t){return xe(t),Y(t,"value",()=>J(t.col,t.row)),t}function kt(t){return xe(t),t}function xe(t){Object.assign(t,{cols:Q.value,colsMap:Ne.value,sort:he,rowIndex:oe.value+t.pageIndex,color:e.color,dark:n.value,dense:e.dense}),G.value===!0&&Y(t,"selected",()=>we(t.key),(d,b)=>{ne([t.key],[t.row],d,b)}),Y(t,"expand",()=>V(t.key),d=>{ut(t.key,d)})}function J(t,d){const b=typeof t.field=="function"?t.field(d):d[t.field];return t.format!==void 0?t.format(b,d):b}const X=f(()=>({pagination:w.value,pagesNumber:ie.value,isFirstPage:Ce.value,isLastPage:qe.value,firstPage:_e,prevPage:Pe,nextPage:ke,lastPage:Be,inFullscreen:a.value,toggleFullscreen:r}));function Bt(){const t=o.top,d=o["top-left"],b=o["top-right"],m=o["top-selection"],y=G.value===!0&&m!==void 0&&ye.value>0,R="q-table__top relative-position row items-center";if(t!==void 0)return u("div",{class:R},[t(X.value)]);let B;if(y===!0?B=m(X.value).slice():(B=[],d!==void 0?B.push(u("div",{class:"q-table__control"},[d(X.value)])):e.title&&B.push(u("div",{class:"q-table__control"},[u("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(B.push(u("div",{class:"q-table__separator col"})),B.push(u("div",{class:"q-table__control"},[b(X.value)]))),B.length!==0)return u("div",{class:R},B)}const Ue=f(()=>Qe.value===!0?null:dt.value);function ze(){const t=xt();return e.loading===!0&&o.loading===void 0&&t.push(u("tr",{class:"q-table__progress"},[u("th",{class:"relative-position",colspan:je.value},Ae())])),u("thead",t)}function xt(){const t=o.header,d=o["header-cell"];if(t!==void 0)return t(Re({header:!0})).slice();const b=Q.value.map(m=>{const y=o[`header-cell-${m.name}`],R=y!==void 0?y:d,B=Re({col:m});return R!==void 0?R(B):u($e,{key:m.name,props:B},()=>m.label)});if(ct.value===!0&&e.grid!==!0)b.unshift(u("th",{class:"q-table--col-auto-width"}," "));else if(Le.value===!0){const m=o["header-selection"],y=m!==void 0?m(Re({})):[u(Te,{color:e.color,modelValue:Ue.value,dark:n.value,dense:e.dense,"onUpdate:modelValue":Ie})];b.unshift(u("th",{class:"q-table--col-auto-width"},y))}return[u("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function Re(t){return Object.assign(t,{cols:Q.value,sort:he,colsMap:Ne.value,color:e.color,dark:n.value,dense:e.dense}),Le.value===!0&&Y(t,"selected",()=>Ue.value,Ie),t}function Ie(t){Qe.value===!0&&(t=!1),ne(H.value.map(v.value),H.value,t)}const ue=f(()=>{const t=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?t.reverse():t});function Rt(){if(e.hideBottom===!0)return;if(St.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,m=o["no-data"],y=m!==void 0?[m({message:b,icon:i.iconSet.table.warning,filter:e.filter})]:[u(De,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),b];return u("div",{class:ge+" q-table__bottom--nodata"},y)}const t=o.bottom;if(t!==void 0)return u("div",{class:ge},[t(X.value)]);const d=e.hideSelectedBanner!==!0&&G.value===!0&&ye.value>0?[u("div",{class:"q-table__control"},[u("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(ye.value)])])]:[];if(e.hidePagination!==!0)return u("div",{class:ge+" justify-end"},pt(d));if(d.length!==0)return u("div",{class:ge},d)}function Tt(t){D({page:1,rowsPerPage:t.value})}function pt(t){let d;const{rowsPerPage:b}=w.value,m=e.paginationLabel||i.lang.table.pagination,y=o.pagination,R=e.rowsPerPageOptions.length>1;if(t.push(u("div",{class:"q-table__separator col"})),R===!0&&t.push(u("div",{class:"q-table__control"},[u("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),u(Yt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:mt.value,displayValue:b===0?i.lang.table.allRows:b,dark:n.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Tt})])),y!==void 0)d=y(X.value);else if(d=[u("span",b!==0?{class:"q-table__bottom-item"}:{},[b?m(oe.value+1,Math.min(re.value,se.value),se.value):m(1,Me.value,se.value)])],b!==0&&ie.value>1){const B={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(B.size="sm"),ie.value>2&&d.push(u(L,{key:"pgFirst",...B,icon:ue.value[0],disable:Ce.value,ariaLabel:i.lang.pagination.first,onClick:_e})),d.push(u(L,{key:"pgPrev",...B,icon:ue.value[1],disable:Ce.value,ariaLabel:i.lang.pagination.prev,onClick:Pe}),u(L,{key:"pgNext",...B,icon:ue.value[2],disable:qe.value,ariaLabel:i.lang.pagination.next,onClick:ke})),ie.value>2&&d.push(u(L,{key:"pgLast",...B,icon:ue.value[3],disable:qe.value,ariaLabel:i.lang.pagination.last,onClick:Be}))}return t.push(u("div",{class:"q-table__control"},d)),t}function Ft(){const t=e.gridHeader===!0?[u("table",{class:"q-table"},[ze()])]:e.loading===!0&&o.loading===void 0?Ae():void 0;return u("div",{class:"q-table__middle"},t)}function Ot(){const t=o.item!==void 0?o.item:d=>{const b=d.cols.map(y=>u("div",{class:"q-table__grid-item-row"},[u("div",{class:"q-table__grid-item-title"},[y.label]),u("div",{class:"q-table__grid-item-value"},[y.value])]));if(G.value===!0){const y=o["body-selection"],R=y!==void 0?y(d):[u(Te,{modelValue:d.selected,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(B,M)=>{ne([d.key],[d.row],B,M)}})];b.unshift(u("div",{class:"q-table__grid-item-row"},R),u(Ut,{dark:n.value}))}const m={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(m.style=[m.style,e.cardStyleFn(d.row)]),e.cardClassFn!==void 0){const y=e.cardClassFn(d.row);y&&(m.class[0]+=` ${y}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(m.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(m.onClick=y=>{l("RowClick",y,d.row,d.pageIndex)}),e.onRowDblclick!==void 0&&(m.onDblclick=y=>{l("RowDblclick",y,d.row,d.pageIndex)}),e.onRowContextmenu!==void 0&&(m.onContextmenu=y=>{l("rowContextmenu",y,d.row,d.pageIndex)})),u("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(d.selected===!0?" q-table__grid-item--selected":"")},[u("div",m,b)])};return u("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},H.value.map((d,b)=>t(Ze({key:v.value(d),row:d,pageIndex:b}))))}return Object.assign(c.proxy,{requestServerInteraction:O,setPagination:D,firstPage:_e,prevPage:Pe,nextPage:ke,lastPage:Be,isRowSelected:we,clearSelection:vt,isRowExpanded:V,setExpanded:ae,sort:he,resetVirtualScroll:wt,scrollTo:Ct,getCellValue:J}),Zt(c.proxy,{filteredSortedRows:()=>Se.value,computedRows:()=>H.value,computedRowsNumber:()=>se.value}),()=>{const t=[Bt()],d={ref:S,class:P.value};return e.grid===!0?t.push(Ft()):Object.assign(d,{class:[d.class,e.cardClass],style:e.cardStyle}),t.push(ht(),Rt()),e.loading===!0&&o.loading!==void 0&&t.push(o.loading()),u("div",d,t)}}}),Dl={key:1},El={key:0},Ml={class:"text-left"},Zl={__name:"TasmotaZBBridge",setup(e){const o=ll(),l=al(),c={page:1,rowsPerPage:0};return(i,n)=>(p(),Z(tl,{padding:""},{default:E(()=>[k(o).isConnected?(p(),U("div",Dl,[n[18]||(n[18]=$("div",{class:"text-h5"},"Tasmota ZigBee Bridge",-1)),$("div",null,[n[9]||(n[9]=$("span",null,"Bridge:",-1)),(p(!0),U(de,null,ve(k(l).zbBridges,a=>(p(),U("span",{key:a.id},[T(zt,{modelValue:k(l).selectedZBDevice,"onUpdate:modelValue":n[0]||(n[0]=r=>k(l).selectedZBDevice=r),val:a,label:`${a.dn} [${a.t}]`,onClick:r=>k(l).getZbInfo(a)},null,8,["modelValue","val","label","onClick"]),T(L,{href:`http://${a.ip}`,target:"_blank",flat:"",round:"",icon:"launch",onClick:n[1]||(n[1]=Je(()=>{},["stop"]))},null,8,["href"])]))),128))]),k(l).selectedZBDevice?(p(),U("div",El,[n[16]||(n[16]=$("div",null,[$("a",{href:"https://tasmota.github.io/docs/Commands/",target:"_blank"}," Tasmota Commands Documentation ")],-1)),$("div",null,[T(fe,{"model-value":k(l).config.SetOption89,label:"SetOption89","onUpdate:modelValue":n[2]||(n[2]=a=>k(l).publishCmd("SetOption89",a))},null,8,["model-value"]),n[11]||(n[11]=z(" Configure MQTT topic for Zigbee devices, unique device topic based on Zigbee device ShortAddr ")),k(l).config.SetOption89?ee("",!0):(p(),Z(Xe,{key:0,class:"text-white bg-negative"},{default:E(()=>n[10]||(n[10]=[z(" SetOption89 must be enabled for this to work! ")])),_:1,__:[10]}))]),$("div",null,[T(fe,{"model-value":k(l).config.SetOption112,label:"SetOption112","onUpdate:modelValue":n[3]||(n[3]=a=>k(l).publishCmd("SetOption112",a))},null,8,["model-value"]),n[12]||(n[12]=z(" Use friendly name in Zigbee topic "))]),$("div",null,[T(fe,{"model-value":k(l).config.SetOption83,label:"SetOption83","onUpdate:modelValue":n[4]||(n[4]=a=>k(l).publishCmd("SetOption83",a))},null,8,["model-value"]),n[13]||(n[13]=z(" Uses Zigbee device friendly name instead of 16 bits short addresses as JSON key when reporting values and commands "))]),$("div",null,[T(fe,{"model-value":k(l).config.SensorRetain,label:"SensorRetain","onUpdate:modelValue":n[5]||(n[5]=a=>k(l).publishCmd("SensorRetain",a))},null,8,["model-value"]),n[14]||(n[14]=z(" Enable MQTT retain flag on TELE message "))]),T(L,{label:"Refresh ZbInfo",color:"primary",flat:"",onClick:n[6]||(n[6]=Je(a=>k(l).getZbInfo(k(l).selectedZBDevice),["stop"]))}),T($l,{class:"q-mt-md",title:"ZigBee Devices",rows:k(l).ZbInfos,"row-key":"Device",pagination:c,flat:"",bordered:""},{header:E(a=>[T(Fe,{props:a},{default:E(()=>[T($e,{"auto-width":""}),(p(!0),U(de,null,ve(a.cols.filter(r=>!["Endpoints","Config"].includes(r.name)),r=>(p(),Z($e,{key:r.name,props:a},{default:E(()=>[z(pe(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:E(a=>[T(Fe,{props:a},{default:E(()=>[T(Oe,{"auto-width":""},{default:E(()=>[T(L,{size:"sm",color:"primary",round:"",dense:"",icon:a.expand?"remove":"add",onClick:r=>a.expand=!a.expand},null,8,["icon","onClick"])]),_:2},1024),(p(!0),U(de,null,ve(a.cols.filter(r=>!["Endpoints","Config"].includes(r.name)),r=>(p(),Z(Oe,{key:r.name,props:a},{default:E(()=>[z(pe(r.value)+" ",1),r.name==="Name"?(p(),Z(nl,{key:0,"model-value":r.value,title:"Set Name",buttons:"","onUpdate:modelValue":v=>k(l).publishCmd("ZbName",`${a.row.Device},${v}`)},{default:E(v=>[T(Wt,{modelValue:v.value,"onUpdate:modelValue":S=>v.value=S,type:"text",dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["model-value","onUpdate:modelValue"])):ee("",!0),r.name==="Name"?(p(),Z(De,{key:1,name:"edit"})):ee("",!0)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),It(T(Fe,{props:a},{default:E(()=>[T(Oe,{colspan:"100%"},{default:E(()=>[$("div",Ml,[n[15]||(n[15]=z(" Home Assistant Discovery topics found for this device ")),$("ul",null,[(p(!0),U(de,null,ve(k(o).searchTopics(a.row.IEEEAddr?.toLowerCase()),(r,v)=>(p(),U("li",{key:v},pe(r),1))),128))])])]),_:2},1024)]),_:2},1032,["props"]),[[Kt,a.expand]])]),_:1},8,["rows"]),T(L,{class:"q-mt-md",color:"primary",label:"generate discovery config for all SNZB-02 sensors (TH01, SNZB-02P, SNZB-02D)",onClick:n[7]||(n[7]=a=>k(l).generateHomeAssistantDiscoveryForAllSNZB02())}),T(L,{class:"q-mt-md q-ml-md",color:"primary",label:"generate discovery config for all TRVZB thermostats",onClick:n[8]||(n[8]=a=>k(l).generateHomeAssistantDiscoveryForAllTRVZB())})])):ee("",!0),k(l).zbBridges.length===0?(p(),Z(Xe,{key:1,class:"bg-warning text-white"},{default:E(()=>n[17]||(n[17]=[$("div",{class:"text-h5"},"No Sonoff ZbBridge with Tasmota found!",-1),$("div",{class:"text-body1"},"Did you configure MQTT on the device?",-1),$("div",{class:"text-body1"},"Wait a moment until all messages have been received.",-1)])),_:1,__:[17]})):ee("",!0)])):(p(),Z(el,{key:0}))]),_:1}))}};export{Zl as default};
